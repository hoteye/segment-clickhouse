<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>本地Draw.io服务测试</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .test-item { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        iframe { width: 100%; height: 600px; border: 1px solid #ddd; }
    </style>
</head>
<body>
    <div class="container">
        <h1>本地Draw.io服务测试</h1>
        
        <div class="test-item">
            <h3>1. 服务可访问性测试</h3>
            <p>本地Draw.io服务地址: <a href="http://localhost:8083" target="_blank">http://localhost:8083</a></p>
            <p>图片资源测试: <img src="http://localhost:8083/images/spin.gif" alt="Spin GIF" style="width: 16px; height: 16px;"></p>
        </div>

        <div class="test-item">
            <h3>2. iframe嵌入测试</h3>
            <iframe src="http://localhost:8083"></iframe>
        </div>

        <div class="test-item">
            <h3>3. 诊断信息</h3>
            <ul>
                <li>当前时间: <span id="current-time"></span></li>
                <li>用户代理: <span id="user-agent"></span></li>
                <li>页面协议: <span id="protocol"></span></li>
            </ul>
        </div>
    </div>

    <script>
        document.getElementById('current-time').textContent = new Date().toLocaleString();
        document.getElementById('user-agent').textContent = navigator.userAgent;
        document.getElementById('protocol').textContent = location.protocol;
        
        // 测试图片加载
        const img = document.querySelector('img[src*="spin.gif"]');
        img.onload = function() {
            console.log('✅ spin.gif 加载成功');
            this.parentElement.classList.add('success');
        };
        img.onerror = function() {
            console.log('❌ spin.gif 加载失败');
            this.parentElement.classList.add('error');
        };
    </script>
</body>
</html>